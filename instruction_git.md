# **Инструкция по работе с системой контроля версий Git**

![Эмблема Git](git.jpg)

Git (произносится «гит») — распределённая система управления версиями. Проект был создан Линусом Торвальдсом для управления разработкой ядра Linux, первая версия выпущена 7 апреля 2005 года. На сегодняшний день его поддерживает Джунио Хамано.

## Инициализация репозитория

Чтобы создать (инициализировать) новый репозиторий нужно в терминале ввести команду:

    git init

Репозиторий будет создан в той папке, из которой вызывалась команда

## Проверка состояния репозитория

Чтобы проверить текущее состояние репозитория нужно ввести в терминале команду:

    git status

## Добавление изменения к отслеживанию версионности

Чтобы добавить сделанное изменение к отслеживанию (поместить в индекс) нужно ввести команду:

    git add <имя файла>

где вместо <имя файла> вводится путь к файлу относительно расположения репозитория.

## Фиксация изменений

Чтобы зафиксировать изменение используется команда:

    git commit

В таком случае откроется окно для ввоба краткого описания сделанных изменений.

Чтобы сделать это одновременно с фиксацией используется команда:

    git commit -m "комментарий"

## Просмотр истории изменений

Чтобы посмотреть историю изменений используется комада

    git log

Для просмотра изменений с выводом одного коммита в одну строку используется команда

    git log --oneline

Для просмотра всех имеющихся коммитов используется команда

    git log --all

Для просмотра лога с графическим изображением веток используется команда

    git log --graph

Все указанные флаги могут использоваться вместе:

    git log --all --oneline --graph

## Просмотр различий между изменениями

Для просмотра отличий между текущим состоянием репозитория и последним сохраненным изменением используется команда

    git diff

Можно также посмотреть разницу между любыми двуми коммитами. Для этого используется команда

    git diff <хэш1> <хэш2>

## Переключение на нужное изменение

Чтобы переключиться на нужный коммит используется команда

    git checkout <хэш>

## Ветки в Git

### Создание новой ветки

Чтобы создать новую ветку используется команда

    git branch <имя_ветки>

### Просмотр всех веток

Чтобы посмотреть какие ветки существуют и на какой мы находимся используется команда

    git branch

### Переключение между ветками

Чтобы переключиться на другую ветку используется команда

    git checkout <имя_ветки>

### Слияние веток

Чтобы влить одну ветку в другую необходимо находясь в целевой ветке (КУДА будем делать слияние) выполнить команду

    git merge <имя_вливаемой_ветки>

### Конфликты при слиянии

Если одна и та же строка в разный версиях записана по разному возникнет конфликт.
Чистый гит автоматически сохраняет оба изменения, далее требуется вручную внести нужные правки и сделать коммит.

VSСode дает возможность выбрать какое изменение сохранить (входящее, существующее или оба).

### Удаление ветки

Чтобы удалить ветку, которая больше не нужно (например после слияния) используется команда

    git branch -d <имя_ветки>

## Удалённые репозитории

Удалённые репозитории - это репозитории которые храняться не локально у вас на компьютере или физическом носителе, а на каком-то сервере в сети (на мой взгляд не обязательно глобальной, но и локальной) с удалённым домтупом для работы с проектом. 

Необходимы для командной работы, проектов с отрытым исходным кодом, удалённого хранения и так же для возможности поделится своим проектом со всем миром.

### Связывание локального и удалённого репозиториев (на примере GitHub):

1. необходимо зарегистрироваться на сайте [GitHub](https://github.com/) или уже иметь свой аккаут и залогиниться (<your_own_login> - ваш собственный логин, далее он нам понадобиться)
1. в верхнем правом углу перейти по кнопке "+" -> "New repository"
1. в окне ввода "Repository name" ввести имя репозитория <name_repo>(при необходимости/желании заполнить необходимой информацией поле ввода "Description (optional)")?
1. при необходимости/желании можно выбрать публичный реепозиторий или приватный, добавление файла README, добавление файла .gitignore, выбрать лицензию для репозитория
1. создать новвый репозиторий по кнопке "Create repository"
1. далее выбираем выриант по которому будем работать: создание нового локального репозитория и его выгрузка в удалённый репозиторий, выгрузка в удалённый репозиторий уже имеющегося локальнольного репозитория, импортировать код из другого репозитория (наша ситуация - 2)
1. по нашему варианту GitHub подсказывает нам три команды для последовательного выполнения в терминале:

        git remote add origin https://github.com/<your_own_login>/<name_repo>
        git branch -M main
        git push -u origin main

1. компируем первую строку, втсавляем её в поле ввода в терминале и выполняем
1. копируем вторую строку, вставляем её в терминале и выполнем (ВАЖНО!!! "main" - наименование главной ветки создающегося удалённого репозитория, если в вашем проекте главная ветка "master", то лучше main переименовать в master для избежания путаницы в дальнейшей работе)

        git branch -M main

1. копируем третью строку, вставляеем её в терминале и выполняем (ВАЖНО!!! "main" - в данном случае это наименование ветки которую загружаете в удалённый репозиторий, при необходимости измените наимеование ветки)

        git push -u origin main

1. обновляем страницу GitHub-a и видим что локальный репозитории загружен в удалённый.

### Команды взаимодействия с удалённым репозиторием

    git clone '+ ссылка на удалённый репозиторий'

Используется для создания копии удалённого репозитория на вашем компьютере, с которым будет продолжаться работа, а после выгружаться к удалённому

    git push

Команда выгрузки репозитория (выгрузка проведённых изменнений репозитория, в случае если вы выгружаете не ту ветку которую загружали, Git подскажет какую команду нужно использовать). При использованиие команды вы должны находиться на той ветке репозитория, которую хотите выгрузить в удалённый репозиторий.

    git pull
    
Зыгрузка удалённого репозитория (или обновление уже скаченного репозитория) на ваш компьютер. Команда является составной - скачивает и сливает (мержит) имеющийся у вас со скаченным репозиторием (вполне вероятны конфликты после выполнения этой команды). Рекомендуется выполнять перед каждой выгрузкой (git push) для избежания конфликтов.

### Fork (вилка)

Команда (кнопка) для создания копии удалённого репозитория на соём аккаунте. Распологается в правом верхнем углу.

В начале работы с таким репозиторием рекумендуется (НЕОБХОДИМО) создать новую ветку(и) в которой(ых) буду происходить изменения и только с ней(ними) и работать, в основную ветку изменнеия не заливать, это необходимо для сохраниния исходного кода и вимой разницей исходного варианта с вашим.

В противном случае при отправке предложений автору (владельцу) он может их отклонить даже не посмотрев.

### Pull-request

Отправка автору (владельцу) удалённого репозитория, который вы скопировали себе при помощи Fork (см. выше), предложений об измениях внесённых вами (или вашей командой).

После внесённых изменений (В НОВОЙ ВЕТКЕ) в скопированный удалённый репозиторий происходит сие действие следующим образом:

1. в открытой копии изменённого удаалённого репозитория нажимаем кнопку "Compare & pull request" (или в открывающемся меню Contribute кнопка "Open pull request")
1. далее GitHub сравнивает копию и оригинал на возможность слияния
1. после проверки можем выбрать какаого файла и которой ветки, какой файл и какаю витку мы будем предлагать для рассмотерия автору (собственнику), можем ввести сообщение с темой изменения
1. нажимаем кнопку "Create pull request" для отправки предложения
1. предложение отправлено и страница становится диалоговой, для общения с автором (собственником) того проекта который мы изменили.

Если мы являемся автором (собственником) удалённого репозитория и нам присылают предложения с изменениями, то через окно этого репозитория мы пожем перейти на вкладку "Pull request" к списку предложений с изменнениями, где будет аналогичная диалоговая страница из которой мы можем посмотреть предложенный изменения изи пообщаться с автором (собственником) этих изменений.